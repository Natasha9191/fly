"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[73740],{612289:function(e){var n,t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardPickerList_pin",selections:[n={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BoardSection",kind:"LinkedField",name:"section",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};t.hash="c5e34729d91812fdf0f426c5f40a521b",e.exports=t},390687:function(e){var n,t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardTitleSuggestionList_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BoardSection",kind:"LinkedField",name:"section",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:n=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:n,storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};t.hash="69ffcdea57a7778d2ebbcd41c276c0d0",e.exports=t},172335:function(e){var n,t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinAddSection_pin",selections:[n={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};t.hash="b3ec14d29962e56f80dd52e7e6d7a6d9",e.exports=t},977297:function(e){var n,t,i,r,o,a={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],kind:"Fragment",metadata:null,name:"RepinBoardPickerQuery",selections:[{alias:null,args:t=[{kind:"Variable",name:"pin",variableName:"pinId"}],concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[r={alias:null,args:null,concreteType:"BoardTitleSuggestions",kind:"LinkedField",name:"boardTitleSuggestions",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null},o={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"RepinBoardPickerQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null},o],storageKey:null}]},params:{id:"912911faa6d93292fbdd97db8c82e6d46db1e11fe517ace49dd4ea04bbbbfa76",metadata:{},name:"RepinBoardPickerQuery",operationKind:"query",text:null}};a.hash="2deee1270776771025d6d29bf4e91acf",e.exports=a,function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let n=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[n]=e}}}(a)},893831:function(e){var n,t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinCreateBoardButton_pin",selections:[n={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[n],storageKey:null}],type:"Pin",abstractKey:null};t.hash="1612c2df94f42990b3d4f6ccede72a70",e.exports=t},592657:function(e){var n,t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinSectionPicker_pin",selections:[n={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};t.hash="0588c16f43d378c21df320420e52c9eb",e.exports=t},166300:function(e,n,t){var i=t(908390),r=t(444445),o=t(134879),a=t(50286),l=t(515198);n.Z=function(e){var n=e.children,t=e.roundedForLargeDevice,s="phone"!==(0,a.ZP)()&&t;return(0,o.V)()?(0,l.jsx)(i.xu,{marginEnd:-r.D6,marginStart:-r.D6,overflow:s?"hidden":void 0,rounding:s?6:void 0,children:(0,l.jsx)(o.C,{value:!1,children:n})}):n}},499659:function(e,n,t){t.d(n,{Q6:function(){return d},qe:function(){return s},yU:function(){return c}});var i=t(239745),r=function(e,n){return e.length===n.length&&e.every(function(e,t){return e===n[t]})},o=function(e){return e};function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;return function(i){var r=[];return function(){for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];var s=r.find(function(e){return n(e.args,t(a))});if(s)return s.result;var c=i.apply(void 0,a);return r.push({args:t(a),result:c}),e&&r.length>e&&r.shift(),c}}}var l=a();n.ZP=l;var s=a(1),c=a(void 0,r,function(e){return[JSON.stringify(e)]}),d=a(0,function(e,n){return e.length===n.length&&e.every(function(e,t){return(0,i.Z)(e,n[t])})})},63552:function(e,n,t){t.d(n,{Z:function(){return o}});var i=t(908390),r=t(515198);function o(e){var n=e.children,t=e.onMouseEnter,o=e.onMouseLeave,a=e.onTouch,l=e.rounding,s=e.fullWidth,c=e.pressState,d=void 0===c?"none":c,u=e.accessibilityLabel,p=e.role,f=(Array.isArray(d)?d:[d]).includes("compress");return(0,r.jsx)(i.iP,{fullWidth:void 0!==s&&s,onMouseEnter:t&&function(e){return t(e.event)},onMouseLeave:o&&function(e){return o(e.event)},onTap:a&&function(e){return a(e.event)},rounding:l,tapStyle:f?"compress":"none",accessibilityLabel:u,role:p,children:n})}},734226:function(e,n,t){t.d(n,{Z:function(){return s}});var i=t(76911),r=t(908390),o=t(898781),a=t(350118),l=t(515198);function s(e){var n=e.selectedPinIds,t=(0,o.ZP)(),s=(0,i.useRef)(),c=(0,a.AF)(),d=(n||[]).map(function(e){return c[e]}).filter(Boolean);(0,i.useEffect)(function(){var e=s.current;e&&(e.scrollLeft=e.scrollWidth-e.offsetWidth)},[d]);var u=d.map(function(e,n){var i,o,a,s,c=e.description,d=e.images,u=null==d?void 0:d["236x"];return(0,l.jsx)(r.xu,{marginEnd:1,children:(0,l.jsx)(r.zd,{rounding:2,wash:!0,width:50,height:65,children:(0,l.jsx)(r.Ee,{alt:!!(null!=c&&c.trim())&&(null==c?void 0:c.trim())||t._('Selected Pin', 'SelectedPinsPreview.image.accessibilityLabel', 'Accessibility label for Pin image without description'),color:null!==(i=e.dominant_color)&&void 0!==i?i:"",naturalHeight:null!==(o=null==u?void 0:u.height)&&void 0!==o?o:1,naturalWidth:null!==(a=null==u?void 0:u.width)&&void 0!==a?a:1,src:null!==(s=null==u?void 0:u.url)&&void 0!==s?s:"",fit:"contain"})})},n)});return(0,l.jsx)(r.xu,{display:"flex",overflow:"scroll",marginTop:2,ref:s,children:u})}},881802:function(e,n,t){t.d(n,{Bb:function(){return g},Bx:function(){return s},F4:function(){return l},OG:function(){return o},Qj:function(){return c},_6:function(){return m},gv:function(){return a},hg:function(){return d},is:function(){return f},jP:function(){return h},lt:function(){return r},oM:function(){return u},wI:function(){return p}});var i=t(826067),r=function(e){return e._('Log in to continue', 'limitedLogin.modalHeader.default', 'Default title on mobile web limited login modal')},o=function(e){return e.pathname},a=function(e){var n=e.firstName,t=e.i18n;return n?(t._('{{ name }} invited you to join their board', 'limitedLogin.modalHeader.groupBoardCollab', 'Mobile Modal prompting users to join a friends({{ name }}) board')).replace("{{ name }}",n):t._('Your friends invited you to join their board', 'limitedLogin.modalHeader.groupBoardCollab', 'Mobile Modal prompting users to join a friends board')},l=function(e){var n=(0,i.mB)(e.search).board_url;if(n){var t=(0,i.Jx)(n),r=(0,i.XP)({accept_invite:!0,seamless:!0});return t.includes("?")?"".concat(t,"&").concat(r):"".concat(t,"?").concat(r)}return e.pathname},s=function(e){return e._('Log in to save this Pin', 'limitedLogin.modalHeader.repin', 'Title on mobile web limited login modal to prompt users to login after they clicked save button.')},c=function(e){var n=e.pathname;if(n.startsWith("/pin/")){var t=n.split("/");if(t.length>2)return"/".concat(t[1],"/").concat(t[2],"/repin/")}return n},d=function(e){return e._('Log in to send this Pin', 'limitedLogin.modalHeader.send', 'Title on mobile web limited login modal to prompt users to login after they clicked send button.')},u=function(e){return e._('Log in to edit this Pin', 'limitedLogin.modalHeader.editPin', 'Title on mobile web limited login modal to prompt users to login after they clicked edit button.')},p=function(e){var n=e.pathname;if(n.startsWith("/pin/")){var t=n.split("/");if(t.length>2)return"/".concat(t[1],"/").concat(t[2],"/edit/")}return n},f=function(e){return e._('Log in to create a Pin or board', 'limitedLogin.modalHeader.create', 'Title on mobile web limited login modal to prompt users to login to create a Pin or board.')},h=function(e){return e._('Log in to hide this Pin', 'limitedLogin.modalHeader.hidePin', 'Title on mobile web limited login modal to prompt users to login after they clicked hide Pin button.')},m=function(e){return e._('Log in to share the profile', 'limitedLogin.modalHeader.shareProfile', 'Title on mobile web limited login modal to prompt users to login after they clicked share button on profile page.')},g=function(e){return e._('Log in to create a board', 'limitedLogin.modalHeader.createBoard', 'Title on mobile web limited login modal to prompt users to login to create a board.')}},149823:function(e,n,t){t.d(n,{Z:function(){return l}});var i=t(898781),r=t(881802),o=t(987318),a=t(515198);function l(e){var n=e.children,t=e.callbackFunction,l=e.modalHeader,s=e.nextLocation,c=(0,i.ZP)(),d=(0,o.H)(),u=d.viewer,p=d.loginForMore,f=d.limitedLoginModalSubheader,h=d.limitedLoginModalNextLocation,m="LIMITED_LOGIN"===u.type;return(0,a.jsx)("div",{onClickCapture:function(e){m&&(t&&t(),e&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()),null==p||p.setVisible(!0),null==f||f.setText(l||(0,r.lt)(c)),s&&(null==h||h.setRoute(s)))},children:n})}},160865:function(e,n,t){t.d(n,{Z:function(){return nw}});var i,r,o,a,l,s,c=t(76911),d=t(506979),u=t(599689),p=t(908390),f=t(112690),h=t(332611),m=t(121151),g=t(968121),y=t(499128),v=t(898781),_=t(349700),b=t(995081),P=t(313047),x=t(542554),S=t(784590),j=t(989726),w=t(50286),k=t(19121),T=t(676802),I=t(427806),B=t(830157);function E(e,n){return!!(e&&e.placement_id&&e.experience_id===n)}var O=t(881802),A=t(149823),R=t(499659),F=t(515198);function C(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,r,o,a,l=[],s=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(i=o.call(t)).done)&&(l.push(i.value),l.length!==n);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return l}}(e,n)||function(e,n){if(e){if("string"==typeof e)return z(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return z(e,n)}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=Array(n);t<n;t++)i[t]=e[t];return i}var L="cubic-bezier(0.66, 0.025, 0.33, 0.975)",D=(0,R.qe)(function(e,n,t,i,r){var o=e,a=n,l=0,s=0,c="",d=Math.floor(n/3);if("shrinkToPin"===t&&(l="24px",s=1,o=Math.floor(3*d/2),a=d),"pinToGrid"===t&&i&&r){var u=i.getBoundingClientRect(),p=r.getBoundingClientRect(),f=p.x+p.width/2-(u.x+u.width/2),h=p.y+p.height/2-(u.y+u.height/2);c="translate(".concat(f,"px, ").concat(h,"px)"),l="24px 0px 0px 24px",s=1,o=d,a=d}return{borderRadius:l,height:o,opacity:s,overflow:"hidden",width:a,WebkitTransformOrigin:"center center",transformOrigin:"center center",WebkitTransform:c,transform:c,WebkitTransition:"all .42s ".concat(L),transition:"all .42s ".concat(L)}}),Z=(0,R.qe)(function(e){return{opacity:e?1:0,WebkitTransition:"opacity .42s ".concat(L),transition:"opacity .42s ".concat(L)}}),M=(0,R.qe)(function(e){return{opacity:e?0:1,WebkitTransition:"all .25s ".concat(L),transition:"all .25s ".concat(L),zIndex:3}});function K(e){var n,t,i,r,o=e.completeExperience,a=e.pinDominantColor,l=e.pinImageHeight,s=e.pinImageWidth,d=e.pinImageUrl,u=(0,v.ZP)(),f=C((0,c.useState)("visible"),2),h=f[0],m=f[1],g=C((0,c.useState)("none"),2),y=g[0],_=g[1],b=window.innerWidth,P=b*(l/s),x=Math.floor(b/3),S=Math.floor(b/6);(0,c.useEffect)(function(){d&&"none"===y&&(n=setTimeout(function(){_("shrinkToPin")},85)),d&&"shrinkToPin"===y&&(t=setTimeout(function(){_("pinToGrid")},2e3)),"pinToGrid"===y&&"visible"===h&&(i=setTimeout(function(){m("hidden")},2e3)),"hidden"===h&&(r=setTimeout(function(){m("none"),o()},300))}),(0,c.useEffect)(function(){return function(){clearTimeout(n),clearTimeout(t),clearTimeout(i),clearTimeout(r)}},[]);var j=(0,c.useRef)(null),w=(0,c.useRef)(null);return(0,F.jsxs)(p.xu,{alignItems:"center",bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:M("hidden"===h)},direction:"column",display:"none"===h?"none":"flex",justifyContent:"center",left:!0,position:"fixed",right:!0,top:!0,children:[(0,F.jsxs)(p.xu,{height:b/2,width:"100%",marginBottom:8,display:"flex",justifyContent:"center",alignItems:"center",position:"relative",children:[(0,F.jsx)(p.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:Z("pinToGrid"===y)},children:(0,F.jsx)(p.zd,{rounding:6,width:x+S+1,height:x,children:(0,F.jsxs)(p.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,F.jsx)(p.xu,{width:x,height:x,color:"transparent",ref:w}),(0,F.jsxs)(p.kC,{alignItems:"stretch",direction:"column",justifyContent:"between",children:[(0,F.jsx)(p.xu,{width:S,height:S,color:"secondary"}),(0,F.jsx)(p.xu,{width:S,height:S,color:"secondary"})]})]})})}),(0,F.jsx)(p.xu,{ref:j,position:"absolute",dangerouslySetInlineStyle:{__style:D(P,b,y,j.current,w.current)},children:(0,F.jsx)(p.Ee,{alt:u._('Pin image', 'Pin image on repin page', 'Pin image on repin page'),src:d,fit:"cover",naturalHeight:l,naturalWidth:s,color:a})})]}),(0,F.jsx)(p.xu,{marginTop:8,marginBottom:8,paddingX:12,children:(0,F.jsx)(p.X6,{align:"center",size:"500",children:u._('Keep your ideas organized by creating a board', 'boardPicker.edu.heading', 'board create education shown before user create their first board')})})]})}var H=t(56632),N=t(327212);function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,G(i.key),i)}}function q(e,n){return(q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function Y(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,n,t){return(n=G(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function G(e){var n=function(e,n){if("object"!==W(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,n||"default");if("object"!==W(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===W(n)?n:String(n)}var X=["#0074e8","#0FA573","#B469EB","#F13535","#E2780D"],J=function(e,n){return Math.random()*((e||1)-(n||0))+(n||0)},$=function(e){return e*(Math.PI/180)},ee=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&q(e,n)}(r,e);var n,t,i=(n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=V(r);if(n){var i=V(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,n){if(n&&("object"===W(n)||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");return Y(e)}(this,e)});function r(){var e;!function(e,n){if(!(e instanceof n))throw TypeError("Cannot call a class as a function")}(this,r);for(var n=arguments.length,t=Array(n),o=0;o<n;o++)t[o]=arguments[o];return Q(Y(e=i.call.apply(i,[this].concat(t))),"animationTimer",null),Q(Y(e),"canvasRemovalTimer",null),Q(Y(e),"childrenContainerRef",(0,c.createRef)()),Q(Y(e),"containerRef",(0,c.createRef)()),Q(Y(e),"buildCanvas",function(){if(!e.containerRef.current)return null;var n=window.innerWidth,t=e.containerRef.current.getBoundingClientRect(),i=t.height,r=t.top,o=document.createElement("canvas");return o.style.position="absolute",o.style.left="0px",o.style.top="".concat(r-(n-i)/2,"px"),o.style.pointerEvents="none",o.style.width="".concat(n,"px"),o.style.height="".concat(n,"px"),o.width=n,o.height=n,o}),Q(Y(e),"explode",function(){var n=e.buildCanvas();if(n){var t=e.containerRef.current,i=e.childrenContainerRef.current,r=n.getContext("2d");null==t||t.insertBefore(n,i),function e(n,t,i,r){window.requestAnimationFrame(function(){return e(n,t,i,r)}),t.clearRect(0,0,i,r),n.forEach(function(e){e.x+=e.speed*Math.cos($(e.degree)),e.y+=e.speed*Math.sin($(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(t.beginPath(),t.globalAlpha=e.opacity,t.fillStyle=e.color,t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.fill())})}(Array.from(Array(120)).map(function(){return{x:n.width/2,y:n.height/2,radius:Math.round(J(10,30)),color:X[Math.floor(Math.random()*X.length)],degree:Number(J(0,360).toFixed(1)),speed:Math.round(J(0,25)),friction:.9,opacity:Number(J(0,.5).toFixed(1)),yVel:0,gravity:.04}}),r,n.width,n.height),e.canvasRemovalTimer=setTimeout(function(){null==t||t.removeChild(n)},(e.props.delay||0)+1e3)}}),e}return U(r.prototype,[{key:"componentDidUpdate",value:function(e){var n=this.props,t=n.delay,i=n.startAnimation,r=e.startAnimation;i&&r!==i&&(this.animationTimer=setTimeout(this.explode,t))}},{key:"componentWillUnmount",value:function(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}},{key:"render",value:function(){return(0,F.jsx)(p.xu,{ref:this.containerRef,children:(0,F.jsx)(p.xu,{ref:this.childrenContainerRef,children:this.props.children})})}}]),t&&U(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}(c.PureComponent);function en(e){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function ei(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?et(Object(t),!0).forEach(function(n){ec(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):et(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function er(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=Array(n);t<n;t++)i[t]=e[t];return i}function eo(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,ed(i.key),i)}}function ea(e,n){return(ea=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function el(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function es(e){return(es=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ec(e,n,t){return(n=ed(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ed(e){var n=function(e,n){if("object"!==en(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,n||"default");if("object"!==en(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===en(n)?n:String(n)}Q(ee,"defaultProps",{delay:0});var eu=function(e,n,t){var i,r,o=[],a=null===(i=n.current)||void 0===i?void 0:i.getBoundingClientRect(),l=null===(r=t.current)||void 0===r?void 0:r.getBoundingClientRect();if(a&&l){var s={x:l.left-a.left,y:l.top-a.top},c={x:l.width/a.width,y:l.height/a.height};o.push("translate(".concat(s.x,"px, ").concat(s.y,"px)")),o.push("scale(".concat(c.x,", ").concat(c.y,")"))}return{WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?o.join(" "):"none",transform:e?o.join(" "):"none",WebkitTransition:"all .5s ease-in-out",transition:"all .5s ease-in-out",borderRadius:e?"8px 0px 0px 0px":"8px",overflow:"hidden",marginBottom:24}},ep=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&ea(e,n)}(o,e);var n,t,i,r=(n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=es(o);if(n){var i=es(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,n){if(n&&("object"===en(n)||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");return el(e)}(this,e)});function o(){var e;!function(e,n){if(!(e instanceof n))throw TypeError("Cannot call a class as a function")}(this,o);for(var n=arguments.length,t=Array(n),i=0;i<n;i++)t[i]=arguments[i];return ec(el(e=r.call.apply(r,[this].concat(t))),"state",{startAnimation:!1}),ec(el(e),"dismissTimer",null),ec(el(e),"pinRef",(0,c.createRef)()),ec(el(e),"pinDestinationRef",(0,c.createRef)()),ec(el(e),"handleAnimationAndCompletion",function(){var n=e.props,t=n.onComplete,i=n.savePin,r=n.selectedBoardName;if(r){var o=e.startAnimation();Promise.all([o,i(r)]).then(function(e){t((function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,r,o,a,l=[],s=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(i=o.call(t)).done)&&(l.push(i.value),l.length!==n);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return l}}(e,2)||function(e,n){if(e){if("string"==typeof e)return er(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return er(e,n)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1],r)}).catch(function(e){o.then(function(){e&&e.onError&&e.onError()})})}}),ec(el(e),"startAnimation",function(){return new Promise(function(n){e.setState({startAnimation:!0},function(){e.dismissTimer=setTimeout(function(){n()},2600)})})}),e}return t=[{key:"componentWillUnmount",value:function(){this.dismissTimer&&clearTimeout(this.dismissTimer)}},{key:"componentDidUpdate",value:function(){var e=this.props.selectedBoardName,n=this.state.startAnimation;e&&!n&&this.handleAnimationAndCompletion()}},{key:"render",value:function(){var e=this,n=this.props,t=n.pinDominantColor,i=n.pinImageUrl,r=n.selectedBoardName,o=this.state.startAnimation;return(0,F.jsxs)(c.Fragment,{children:[(0,F.jsx)(p.Le,{top:P.DEFAULT_HEIGHT,zIndex:new p.Ry(3),children:(0,F.jsx)(p.xu,{display:"flex",color:o?"transparent":"default",justifyContent:"center",alignItems:"center",children:(0,F.jsx)(p.xu,{ref:this.pinRef,height:84,width:84,position:"relative",dangerouslySetInlineStyle:{__style:eu(o,this.pinRef,this.pinDestinationRef)},children:(0,F.jsx)(p.Ee,{alt:this.props.i18n._('Pin image', 'Pin image on repin page', 'Pin image on repin page'),src:i,fit:"cover",naturalHeight:84,naturalWidth:84,color:t})})})}),(0,F.jsx)(p.xu,{color:"default",position:"fixed",top:!0,bottom:!0,right:!0,left:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none",opacity:o?1:0,WebkitTransition:"opacity .4s ease-in-out",transition:"opacity .4s ease-in-out",zIndex:2}},children:(0,F.jsxs)(p.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",children:[(0,F.jsx)(ee,{delay:1200,startAnimation:o,children:(0,F.jsx)(p.zd,{rounding:2,width:148,children:(0,F.jsx)(p.kC,{alignItems:"stretch",justifyContent:"start",wrap:!0,children:Array.from([,,,,]).map(function(n,t){var i=t<=1,r=t%2,o=0===t?e.pinDestinationRef:null;return(0,F.jsx)(p.xu,{ref:o,color:0===t?"transparent":"secondary",marginBottom:i?1:0,marginEnd:r?0:1,width:72,height:72},t)})})})}),(0,F.jsx)(p.xu,{paddingX:4,dangerouslySetInlineStyle:{__style:{opacity:o?1:0,WebkitTransform:o?"translateY(0)":"translateY(20%)",transform:o?"translateY(0)":"translateY(20%)",WebkitTransition:"all .25s ease-in-out .5s",transition:"all .25s ease-in-out .5s",textAlign:"center",marginTop:"50px"}},children:(0,F.jsx)(p.X6,{children:(0,_.nk)(this.props.i18n._('You saved your first Pin to {{ selectedBoardName }}!', 'First repin confirmation message', 'First repin confirmation message'),{selectedBoardName:r})})})]})})]})}}],eo(o.prototype,t),i&&eo(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(c.PureComponent),ef=function(e){var n=(0,v.ZP)();return(0,F.jsx)(ep,ei(ei({},e),{},{i18n:n}))},eh=t(662089),em=t(348854),eg=t(990823),ey=t(819063),ev=t(384833),e_=t(698330),eb=t(404508),eP=t(704217),ex=t(916117),eS=t(773285),ej=t(343341),ew=t(497307),ek=t(678638),eT=t(139574),eI=t(850431),eB=t(166753),eE=t(580751);function eO(e){return(eO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eA(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,eL(i.key),i)}}function eR(e,n){return(eR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function eF(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eC(e){return(eC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ez(e,n,t){return(n=eL(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function eL(e){var n=function(e,n){if("object"!==eO(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,n||"default");if("object"!==eO(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===eO(n)?n:String(n)}var eD=void 0!==i?i:i=t(172335),eZ=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&eR(e,n)}(r,e);var n,t,i=(n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=eC(r);if(n){var i=eC(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,n){if(n&&("object"===eO(n)||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");return eF(e)}(this,e)});function r(){var e;!function(e,n){if(!(e instanceof n))throw TypeError("Cannot call a class as a function")}(this,r);for(var n=arguments.length,t=Array(n),o=0;o<n;o++)t[o]=arguments[o];return ez(eF(e=i.call.apply(i,[this].concat(t))),"state",{name:""}),ez(eF(e),"onNextButtonTouch",function(){var n=e.state.name,t=e.props;(0,t.createSectionAndRepin)(n,t.i18n)}),ez(eF(e),"onNameChange",function(n){e.setState({name:n.target.value})}),e}return eA(r.prototype,[{key:"render",value:function(){var e=this.props,n=e.pin,t=e.useRoundedCorners,i=this.state.name;return(0,F.jsx)(ew.Z,{backButtonIcon:"arrow-back",name:i,onNameChange:this.onNameChange,onNextButtonTouch:this.onNextButtonTouch,selectedPinIds:[n.entityId],useRoundedCorners:t})}}]),t&&eA(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}(c.PureComponent);function eM(e){var n=e.boardId,t=e.isEditingPin,i=e.onSuccess,r=e.pinKey,o=e.pinBoardId,a=e.pinSectionId,l=e.trackingParams,s=e.useRoundedCorners,c=(0,ex.u)(eD,r).data,p=(0,d.useDispatch)(),h=(0,u.useHistory)(),m=(0,v.ZP)(),g=(0,ej.F9)().showToast,_=(0,f.Z)(),b=(0,eE.M)(),P=(0,eS.F)().checkExperiment,x=function(e){return h.push(e)};return(0,F.jsx)(eZ,{i18n:m,createSectionAndRepin:function(e){var r=function(e){return g(function(n){var t=n.hideToast;return(0,F.jsx)(y.ZP,{text:e.message||m._('Sorry! Something went wrong on our end.', 'error creating board section', 'error creating board section'),type:"error",onHide:t})})};p((0,ek.Nv)(n,[],e,_)).then(function(e){g(function(e){var n=e.hideToast;return(0,F.jsx)(y.ZP,{text:m._('Section added!', ' - ', ' -- '),onHide:n})});var s,d=e.resource_response.data;p((0,eI.w)({checkExperiment:P,i18n:m,logContextEvent:_,pinId:c.entityId,boardId:n,onSuccess:t?void 0:i,onUndo:function(e,n,t,i){var r;return(0,eB.Z)({boardId:t,boardSectionId:i,clientTrackingParams:l,dispatch:p,i18n:m,newPinId:n,showToast:g,sourcePinId:e,undoSavedPin:null!==(r=null==b?void 0:b.unsave)&&void 0!==r?r:function(){}})},showToast:g,section:d,trackingParams:{clientTrackingParams:l,pinnedToBoardId:c.pinnedToBoard?c.pinnedToBoard.entityId:""},historyPush:x,savePinId:null!==(s=null==b?void 0:b.save)&&void 0!==s?s:function(){}})).then(function(){c&&o&&p((0,eT.q)({pinId:c.entityId,boardId:o,boardSectionId:a,clientTrackingParams:l})).then(function(){var e;return c.pinnedToBoard?h.replace(null!==(e=c.pinnedToBoard.url)&&void 0!==e?e:""):void 0})}).catch(r)}).catch(r)},pin:c,useRoundedCorners:s})}var eK=t(166300),eH=t(995228),eN=t(829407),eW=t(361115),eU=t(927383),eq=t(177891),eY=t(188170);function eV(e){var n=e.handleSelected,t=(0,v.ZP)(),i=(0,f.Z)();return(0,eN.Z)(function(){i({component:7,element:11933,event_type:13,view_type:3})}),(0,F.jsx)(p.iP,{rounding:2,onTap:function(){n(!1,null)},children:(0,F.jsxs)(p.xu,{"data-test-id":"board-picker-row",display:"flex",alignItems:"center",rounding:2,column:12,marginBottom:4,children:[(0,F.jsx)(p.xu,{color:"secondary",display:"flex",flex:"none",justifyContent:"center",alignItems:"center",height:48,rounding:2,width:48,children:(0,F.jsx)(p.JO,{accessibilityLabel:t._('Profile', 'save.ProfilePickerRow.IconAccessibilityLabel', 'Accessibility label for icon on option to save Pin to profile'),color:"default",icon:"history",size:22})}),(0,F.jsx)(p.xu,{display:"flex",direction:"column",justifyContent:"center",marginStart:2,width:"100%",overflow:"hidden",children:(0,F.jsx)(p.xv,{size:"400",weight:"bold",lineClamp:1,children:t._('Profile', 'save.ProfilePickerRow', 'Option to save Pin to profile')})})]})})}function eQ(e){return(eQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eG(e,n,t,i,r,o,a){try{var l=e[o](a),s=l.value}catch(e){t(e);return}l.done?n(s):Promise.resolve(s).then(i,r)}function eX(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}var eJ=void 0!==r?r:r=t(612289);function e$(e){var n,t,i=e.boards,r=e.boardsShortlist,o=e.closeModal,a=e.dismissFlyout,l=e.history,s=e.isEditingPin,f=e.isFromToast,h=e.logContextEvent,m=e.onSelect,g=e.originalPinId,_=e.pinKey,b=e.pinBoardId,P=e.pinSectionId,x=e.saveToProfileEnabled,S=e.trackingParams,j=(0,v.ZP)(),w=(0,ex.u)(eJ,_).data,k=(0,d.useDispatch)(),T=(0,u.useLocation)(),I=(0,eU.Z)(),E=(0,eE.M)(),A=l.location.state&&l.location.state.isOneTapSave,R=(0,eS.F)().checkExperiment,C=x&&R("mweb_top_choices_extract_profile").anyEnabled,z=R("mweb_direct_save_from_grid_v2",{dangerouslySkipActivation:!0}).anyEnabled||R("mweb_direct_save_from_grid_v2_new_user",{dangerouslySkipActivation:!0}).anyEnabled,L=(0,B.Z)(T.state?T.state.trackingParams:"",w.trackingParams),D=(0,eh.Z)(),Z=D.showRepinConfirmation,M=D.showToast,K=function(e){return l.push(e)},H=r?i.filter(function(e){return r.some(function(n){return e.id===n.id})}):i.slice(0,3),N=H.map(function(e){return e.id});x&&N.unshift("PROFILE_PINS");var W=(0,eW.Yg)();(0,eN.Z)(function(){N&&h({event_type:13,component:7,element:1001,view_type:3,aux_data:{pin_id:w.entityId,suggested_boards:N}})});var U=function(e){var n,t=e.boardId,i=e.clientTrackingParams,r=e.i18n,o=e.isQuickSave;return a(),null==W||W("main_pin_repin"),k((0,eI.w)({checkExperiment:R,i18n:r,isQuickSave:o,logContextEvent:h,pinId:w.entityId,boardId:t,onSuccess:l.goBack,onUndo:function(e,n,t,o){var a;return(0,eB.Z)({boardId:t,boardSectionId:o,clientTrackingParams:i,dispatch:k,i18n:r,newPinId:n,originalPinId:f?g:"",showToast:M,sourcePinId:e,undoSavedPin:null!==(a=null==E?void 0:E.unsave)&&void 0!==a?a:function(){}})},originalPinId:g,showRepinConfirmation:Z,trackingParams:S,historyPush:K,suggestedBoardIds:N,savePinId:null!==(n=null==E?void 0:E.save)&&void 0!==n?n:function(){}}))},q=I({fn:(n=regeneratorRuntime.mark(function e(n,t){var i,r,a,c,d,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n&&t)){e.next=4;break}m(t),e.next=20;break;case 4:return e.prev=4,i=!(null!=t&&t.id),e.next=8,U({boardId:null==t?void 0:t.id,clientTrackingParams:L,i18n:j,isQuickSave:i});case 8:var p;if(r=e.sent,(A||z)&&r&&(p={boardId:null==t?void 0:t.id,localPinId:r.id,pinId:w.entityId},k((0,eq.a)(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eX(Object(t),!0).forEach(function(n){var i,r;i=n,r=t[n],(i=function(e){var n=function(e,n){if("object"!==eQ(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,n||"default");if("object"!==eQ(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===eQ(n)?n:String(n)}(i))in e?Object.defineProperty(e,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[i]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eX(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({},p)))),!s){e.next=15;break}return e.next=13,k((0,eT.q)({pinId:w.entityId,boardId:b||"",boardSectionId:P,clientTrackingParams:L}));case 13:c=null===(a=w.pinnedToBoard)||void 0===a?void 0:a.url,f?o():w.section?(u="".concat(null!=c?c:"").concat(null!==(d=w.section.slug)&&void 0!==d?d:"","/"),l.replace(null!=u?u:"")):w.pinnedToBoard&&l.replace(null!=c?c:"");case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),M(function(n){var t=n.hideToast;return(0,F.jsx)(y.ZP,{type:"error",text:e.t0.message||j._('Sorry! Something went wrong on our end.', 'error during repin', 'error during repin'),onHide:t})});case 20:case"end":return e.stop()}},e,null,[[4,17]])}),t=function(){var e=this,t=arguments;return new Promise(function(i,r){var o=n.apply(e,t);function a(e){eG(o,i,r,a,l,"next",e)}function l(e){eG(o,i,r,a,l,"throw",e)}a(void 0)})},function(e,n){return t.apply(this,arguments)}),modalHeader:(0,O.Bx)(j)});return(0,F.jsx)(c.Fragment,{children:(0,F.jsxs)(p.kC,{direction:"column",gap:4,children:[(0,F.jsxs)(p.xu,{children:[x&&C&&(0,F.jsx)(eV,{handleSelected:q}),r.length>0&&(0,F.jsx)(p.xu,{marginTop:2,marginBottom:4,children:(0,F.jsx)(p.xv,{children:j._('Top choices', 'boardPicker.header.topChoices', 'Header of a list of user\'s boards')})}),x&&!C&&(0,F.jsx)(eV,{handleSelected:q}),H.map(function(e){return(0,F.jsx)(eY.Z,{boardId:e.id,onBoardSelected:function(n){return q(n,e)},showSingleBoardRep:!0},e.id)})]}),(0,F.jsxs)(p.xu,{children:[(0,F.jsx)(p.xu,{marginBottom:4,children:(0,F.jsx)(p.xv,{children:j._('All boards', 'RepinFlow.BoardPickerList.AllBoards', 'Board picker list all boards title')})}),i.map(function(e){return(0,F.jsx)(eY.Z,{boardId:e.id,onBoardSelected:function(n){return q(n,e)},showSingleBoardRep:!0},e.id)})]})]})})}var e0=t(63552),e1=function(){return(0,F.jsx)(p.xu,{color:"secondary",display:"inlineBlock",height:60,minWidth:60,overflow:"hidden",position:"relative",rounding:4,children:(0,F.jsxs)(c.Fragment,{children:[(0,F.jsx)(p.xu,{color:"default",dangerouslySetInlineStyle:{__style:{left:"50%"}},height:"100%",position:"absolute",width:1}),(0,F.jsx)(p.xu,{color:"default",dangerouslySetInlineStyle:{__style:{top:"50%"}},height:1,width:"50%",position:"absolute",right:!0})]})})},e2=t(675752),e8=t(109892);function e3(e){return(e3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e5(e,n,t,i,r,o,a){try{var l=e[o](a),s=l.value}catch(e){t(e);return}l.done?n(s):Promise.resolve(s).then(i,r)}function e9(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}var e7=void 0!==o?o:o=t(390687),e4=function(e){var n=e.allSuggestions,t=e.handleCreateBoard,i=e.index,r=e.isFBC,o=e.logContextEvent,a=e.pinViewParameter;t(),o({aux_data:{board_title_list:JSON.stringify(n),is_fbc:r.toString(),selected_board_title_index:i},component:7,element:23,event_type:102,view_parameter:a,view_type:3})};function e6(e){var n,t,i,r,o,a=e.isEditingPin,l=e.isFirstBoard,s=e.history,c=e.onFirstBoardCreate,u=e.pinBoardId,h=e.pinKey,m=e.pinSectionId,g=e.titleSuggestions,y=e.clientTrackingParams,_=(0,f.Z)(),b=(0,e8.Z)(),P=(0,v.ZP)(),x=(0,eU.Z)(),S=(0,eh.Z)().showRepinConfirmation,j=(0,d.useDispatch)(),w=(0,ex.u)(e7,h).data,k=w.entityId,T=(0,e2.A)({hasRichMetadata:!!w.richMetadata,hasRichMetadataProducts:!!(null!==(i=w.richMetadata)&&void 0!==i&&i.products),hasRichMetadataArticle:!!(null!==(r=w.richMetadata)&&void 0!==r&&r.article),hasRichMetadataRecipe:!!(null!==(o=w.richMetadata)&&void 0!==o&&o.recipe)}),I=(0,eE.M)(),E=(0,B.Z)(y,w.trackingParams),A=function(e){return s.push(e)},R=(0,eS.F)().checkExperiment,C=R("mweb_direct_save_from_grid_v2",{dangerouslySkipActivation:!0}).anyEnabled||R("mweb_direct_save_from_grid_v2_new_user",{dangerouslySkipActivation:!0}).anyEnabled,z=function(e){j((0,eT.q)({pinId:k,boardId:u||"",boardSectionId:m,clientTrackingParams:e}))},L=(n=regeneratorRuntime.mark(function e(){var n,t,i,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(E);case 2:t=null===(n=w.pinnedToBoard)||void 0===n?void 0:n.url,w.section?(r="".concat(null!=t?t:"").concat(null!==(i=w.section.slug)&&void 0!==i?i:"","/"),s.replace(null!=r?r:"")):s.replace(null!=t?t:"");case 4:case"end":return e.stop()}},e)}),t=function(){var e=this,t=arguments;return new Promise(function(i,r){var o=n.apply(e,t);function a(e){e5(o,i,r,a,l,"next",e)}function l(e){e5(o,i,r,a,l,"throw",e)}a(void 0)})},function(){return t.apply(this,arguments)}),D=function(e){b({boardCreateOptions:{name:e,initial_pins:[k],initial_pin_client_tracking_params:[y],privacy:"public"}}).then(function(e){return a?L():s.goBack(),e}).then(function(n){var t=n||{},i=t.url,r=t.id,o=(0,em.Io)(void 0===i?"":i,e,P),a=o.href,l=o.text,s=(0,H.Z)({boardId:r,viewType:3}),c=s.duration,d=s.text,u=s.thumbnail;S(function(e){var n=e.hideToast;return(0,F.jsx)(N.Z,{duration:c,href:a,onHide:n,text:d||l,thumbnail:u})}),_({event_type:5,view_type:3,component:7,view_parameter:T,object_id_str:k,clientTrackingParams:E,aux_data:{board_id:r,destination_board_id:r}})})},Z=function(e){b({boardCreateOptions:{name:e,initial_pin_client_tracking_params:[y],privacy:"public"}}).then(function(n){var t,i=n||{},r=i.url,o=void 0===r?"":r,l=i.id;j((0,eI.w)({checkExperiment:R,i18n:P,logContextEvent:_,pinId:k,boardId:l,onUndo:function(){z(E)},trackingParams:{clientTrackingParams:E,pinnedToBoardId:l},historyPush:A,savePinId:null!==(t=null==I?void 0:I.save)&&void 0!==t?t:function(){}})).then(function(n){t={boardId:l,localPinId:n.id,pinId:k},j((0,eq.a)(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?e9(Object(t),!0).forEach(function(n){var i,r;i=n,r=t[n],(i=function(e){var n=function(e,n){if("object"!==e3(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,n||"default");if("object"!==e3(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===e3(n)?n:String(n)}(i))in e?Object.defineProperty(e,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[i]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):e9(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({},t))),a?L():s.goBack();var t,i=(0,em.Io)(o,e,P),r=i.href,c=i.text,d=(0,H.Z)({boardId:l,viewType:3}),u=d.duration,p=d.text,f=d.thumbnail;S(function(e){var n=e.hideToast;return(0,F.jsx)(N.Z,{duration:u,href:r,onHide:n,text:p||c,thumbnail:f})}),_({event_type:5,view_type:3,component:7,view_parameter:T,object_id_str:k,clientTrackingParams:E,aux_data:{board_id:l,destination_board_id:l}})})})},M=x({fn:function(e,n,t){e4({allSuggestions:t,handleCreateBoard:function(){l?c(n):C?Z(n):D(n)},index:e,isFBC:l,logContextEvent:_,pinViewParameter:T})},modalHeader:(0,O.Bb)(P)});return g?g.map(function(e,n,t){return(0,F.jsx)(p.xu,{children:(0,F.jsx)(e0.Z,{onTouch:function(){return M(n,e,t)},pressState:"none",rounding:2,children:(0,F.jsxs)(p.xu,{display:"flex",alignItems:"center",paddingY:2,rounding:2,children:[(0,F.jsx)(e1,{}),(0,F.jsx)(p.xu,{column:10,marginStart:3,children:(0,F.jsx)(p.X6,{size:"400",children:e})})]})},n)},n)}):null}function ne(e){var n=e.allBoards,t=e.saveToProfileEnabled,i=e.boardsShortlist,r=e.closeModal,o=e.dismissFlyout,a=e.history,l=e.isEditingPin,s=e.isFromToast,d=e.onSelect,u=e.originalPinId,p=e.pin,h=e.pinBoardId,m=e.pinSectionId,g=e.trackingParams,y=(0,f.Z)();return(0,F.jsx)(c.Fragment,{children:(0,F.jsx)(e$,{boards:n,boardsShortlist:i,closeModal:r,dismissFlyout:o,history:a,isEditingPin:l,isFromToast:s,logContextEvent:y,onSelect:d,originalPinId:u,pinKey:{type:"deprecated",data:p},pinBoardId:h,pinSectionId:m,saveToProfileEnabled:t,trackingParams:g})})}function nn(e){var n=e.allBoards,t=e.boardsShortlist,i=e.closeModal,r=e.saveToProfileEnabled,o=e.dismissFlyout,a=e.history,l=e.isEditingPin,s=e.isFirstRepinExperience,c=e.isFromToast,d=e.onFirstBoardCreate,u=e.originalPinId,h=e.onSelect,m=e.pin,g=e.pinBoardId,y=e.pinSectionId,_=e.trackingParams,b=e.titleSuggestions,P=(0,v.ZP)(),x=s||0===n.length&&!r,S=(0,f.Z)(),j=function(){return(0,F.jsx)(e6,{history:a,isEditingPin:l,isFirstBoard:x,onFirstBoardCreate:d,pinBoardId:g,pinKey:{type:"deprecated",data:m},pinSectionId:y,titleSuggestions:b,clientTrackingParams:_.clientTrackingParams})};return x?(0,F.jsxs)(p.xu,{paddingX:1,children:[(0,F.jsx)(p.xu,{marginBottom:4,children:(0,F.jsx)(p.xv,{children:P._('Tap to create your first board', 'CTA for board title suggestions', 'Explain to user that tapping on suggestion creates a board')})}),j()]}):(0,F.jsxs)(p.xu,{marginBottom:4,children:[(0,F.jsx)(e$,{boards:n,boardsShortlist:t,closeModal:i,dismissFlyout:o,history:a,isEditingPin:l,isFromToast:c,logContextEvent:S,onSelect:h,originalPinId:u,pinKey:{type:"deprecated",data:m},pinBoardId:g,pinSectionId:y,saveToProfileEnabled:r,trackingParams:_}),b?(0,F.jsxs)(p.xu,{children:[(0,F.jsx)(p.xu,{paddingY:1,children:(0,F.jsx)(eK.Z,{children:(0,F.jsx)(p.iz,{})})}),(0,F.jsx)(p.xu,{paddingY:4,children:(0,F.jsx)(p.xv,{children:P._('Or tap to create a new board', 'boardPicker.suggestedBoardName.title', 'Title for repin page suggested board name section')})}),j()]}):(0,F.jsx)(p.xu,{paddingY:6,children:(0,F.jsx)(p.$j,{accessibilityLabel:P._('Loading repin page content', ' - ', ' -- '),show:!0})})]})}var nt=function(e){var n,i,r,o=void 0!==a?a:a=t(977297),l=(0,eP.useLazyLoadQuery)(o,{pinId:e}).v3GetPinQuery;if(null==l?void 0:null===(n=l.error)||void 0===n?void 0:n.message)throw null==l?void 0:l.error;return(null==l?void 0:null===(i=l.data)||void 0===i?void 0:null===(r=i.boardTitleSuggestions)||void 0===r?void 0:r.map(function(e){return e.title}).filter(Boolean))||[]};function ni(e){var n=e.allBoards,t=e.boardsShortlist,i=e.closeModal,r=e.saveToProfileEnabled,o=e.dismissFlyout,a=e.history,l=e.isEditingPin,s=e.isFetchingBoards,c=e.isFirstRepinExperience,d=e.isFromToast,u=e.onFirstBoardCreate,p=e.onSelect,f=e.originalPinId,h=e.location,m=e.pin,g=e.pinBoardId,y=e.pinDescription,v=e.pinSectionId;return(0,F.jsx)(eH.Z,{children:(0,F.jsx)(nr,{allBoards:n,boardsShortlist:t,saveToProfileEnabled:r,history:a,isFetchingBoards:s,isFirstRepinExperience:c,isFromToast:d,location:h,onFirstBoardCreate:u,onSelect:p,originalPinId:f,closeModal:i,pin:m,pinDescription:y,dismissFlyout:o,isEditingPin:l,pinBoardId:g,pinSectionId:v})})}function nr(e){var n=e.allBoards,t=e.boardsShortlist,i=e.closeModal,r=e.saveToProfileEnabled,o=e.dismissFlyout,a=e.history,l=e.isEditingPin,s=e.isFetchingBoards,c=e.isFirstRepinExperience,d=e.isFromToast,u=e.onFirstBoardCreate,p=e.onSelect,f=e.originalPinId,h=e.location,m=e.pin,g=e.pinBoardId,y=e.pinDescription,v=e.pinSectionId,_=nt(m.id);return(0,F.jsx)(no,{allBoards:n,boardsShortlist:t,saveToProfileEnabled:r,history:a,isFetchingBoards:s,isFirstRepinExperience:c,isFromToast:d,location:h,onFirstBoardCreate:u,onSelect:p,originalPinId:f,closeModal:i,pin:m,pinDescription:y,dismissFlyout:o,isEditingPin:l,pinBoardId:g,pinSectionId:v,titleSuggestions:_})}function no(e){var n=(0,v.ZP)(),t=e.allBoards,i=e.boardsShortlist,r=e.closeModal,o=e.saveToProfileEnabled,a=e.dismissFlyout,l=e.history,s=e.isEditingPin,c=e.isFetchingBoards,d=e.isFirstRepinExperience,u=e.isFromToast,f=e.onFirstBoardCreate,h=e.onSelect,m=e.originalPinId,g=e.location,y=e.pin,_=e.pinBoardId,b=e.pinDescription,P=e.pinSectionId,x=e.titleSuggestions,S={clientTrackingParams:g.state?g.state.trackingParams:"",pinnedToBoardId:y.pinned_to_board?y.pinned_to_board.id:""};return t.length>0||!c?t.length>=10?(0,F.jsx)(ne,{allBoards:t,boardsShortlist:i,closeModal:r,dismissFlyout:a,history:l,isEditingPin:s,isFromToast:u,onSelect:h,originalPinId:m,pin:y,pinBoardId:_,pinDescription:b,pinSectionId:P,saveToProfileEnabled:o,trackingParams:S}):(0,F.jsx)(nn,{allBoards:t,boardsShortlist:i,closeModal:r,dismissFlyout:a,history:l,isEditingPin:s,isFirstRepinExperience:d,isFromToast:u,onFirstBoardCreate:f,onSelect:h,originalPinId:m,pin:y,pinBoardId:_,pinDescription:b,pinSectionId:P,saveToProfileEnabled:o,titleSuggestions:x,trackingParams:S}):(0,F.jsx)(p.xu,{paddingY:2,children:(0,F.jsx)(p.$j,{accessibilityLabel:n._('Loading repin page content', ' - ', ' -- '),show:!0})})}var na=t(287072),nl=void 0!==l?l:l=t(893831);function ns(e){var n=e.isEditingPin,t=e.isFirstBoardCreateActive,i=e.pinKey,r=e.pinBoardId,o=e.pinDescription,a=e.pinSectionId,l=e.trackingParams,s=e.onTouch,c=e.useIconWithBackground,d=(0,v.ZP)(),u=(0,ex.u)(nl,i).data,f=(0,na.Z)({href:{pathname:"/board/create/".concat(u.entityId,"/"),state:{isFirstBoardCreateActive:t,pinnedToBoardId:u.pinnedToBoard?u.pinnedToBoard.entityId:"",pinDescription:o,trackingParams:l,isEditingPin:n,pinBoardId:r,pinSectionId:a}}});return(0,F.jsx)(P.FixedFooter,{height:c?void 0:70,hasTopShadow:c,children:(0,F.jsx)(p.iP,{onTap:function(e){var n=e.event;null==s||s(),f({event:n})},children:(0,F.jsxs)(p.xu,{"data-test-id":"repinCreateBoardButton",display:"flex",alignItems:"center",paddingY:c?0:1,paddingX:c?1:0,children:[c?(0,F.jsx)(p.xu,{color:"secondary",rounding:2,dangerouslySetInlineStyle:{__style:{padding:"14px"}},children:(0,F.jsx)(p.JO,{icon:"add",color:"default",size:20,accessibilityLabel:d._('Create board button', ' - ', ' -- ')})}):(0,F.jsx)(p.JO,{icon:"add-circle",color:"error",size:38,accessibilityLabel:d._('Create board button', ' - ', ' -- ')}),(0,F.jsx)(p.xu,{marginStart:c?2:3,children:(0,F.jsx)(p.xv,{weight:"bold",children:d._('Create board', 'Create new board to Pin to', 'Create new board to Pin to')})})]})})})}var nc=t(568674);function nd(e,n,t,i,r,o,a){try{var l=e[o](a),s=l.value}catch(e){t(e);return}l.done?n(s):Promise.resolve(s).then(i,r)}var nu=void 0!==s?s:s=t(592657);function np(e){var n,t,i=e.boardId,r=e.history,o=e.location.search,a=e.showSectionRep,l=e.pinKey,s=e.onSuccess,c=e.trackingParams,u=e.dismissFlyout,p=(0,d.useDispatch)(),h=(0,v.ZP)(),m=(0,ex.u)(nu,l).data,g=(0,ej.F9)().showToast,y=new URLSearchParams(o),_=y.get("isEditingPin"),b=(0,B.Z)(c,m.trackingParams),P=(0,f.Z)(),x=(0,eE.M)(),S=(0,eS.F)().checkExperiment,j=function(e){return r.push(e)},w=function(e){var n;u(),p((0,eI.w)({checkExperiment:S,i18n:h,logContextEvent:P,pinId:m.entityId,boardId:i,onSuccess:_?void 0:s,onUndo:function(e,n,t,i){var r;return(0,eB.Z)({boardId:t,boardSectionId:i,clientTrackingParams:b,dispatch:p,i18n:h,newPinId:n,showToast:g,sourcePinId:e,undoSavedPin:null!==(r=null==x?void 0:x.unsave)&&void 0!==r?r:function(){}})},showToast:g,section:e,trackingParams:{clientTrackingParams:b,pinnedToBoardId:m.pinnedToBoard?m.pinnedToBoard.entityId:""},historyPush:j,savePinId:null!==(n=null==x?void 0:x.save)&&void 0!==n?n:function(){}})).then(function(){if(e){var n;p((0,ek.A4)(null!==(n=e.id)&&void 0!==n?n:""))}})},k=function(){var e,n,t=null!==(e=y.get("pinBoardId"))&&void 0!==e?e:"",i=null!==(n=y.get("pinSectionId"))&&void 0!==n?n:"";return p((0,eT.q)({pinId:m.entityId,boardId:t,boardSectionId:i,clientTrackingParams:b}))},T=(n=regeneratorRuntime.mark(function e(n,t){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:if(!_){e.next=6;break}return e.next=5,k();case 5:null!==(i=m.pinnedToBoard)&&void 0!==i&&i.url&&r.replace(m.pinnedToBoard.url);case 6:case"end":return e.stop()}},e)}),t=function(){var e=this,t=arguments;return new Promise(function(i,r){var o=n.apply(e,t);function a(e){nd(o,i,r,a,l,"next",e)}function l(e){nd(o,i,r,a,l,"throw",e)}a(void 0)})},function(e,n){return t.apply(this,arguments)});return(0,F.jsx)(nc.Z,{boardId:i,repin:T,showSectionRep:a})}function nf(e){return(nf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nh(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function nm(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nh(Object(t),!0).forEach(function(n){nb(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nh(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function ng(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,nP(i.key),i)}}function ny(e,n){return(ny=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function nv(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n_(e){return(n_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nb(e,n,t){return(n=nP(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function nP(e){var n=function(e,n){if("object"!==nf(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,n||"default");if("object"!==nf(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===nf(n)?n:String(n)}function nx(e){var n=e.children,t=(0,d.useSelector)(function(e){var n=e.session;return 72+((0,b.Rq)(n.userAgentPlatform)?b.Vf:0)});return(0,F.jsx)(p.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:t}},children:n})}var nS=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&ny(e,n)}(o,e);var n,t,i,r=(n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=n_(o);if(n){var i=n_(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,n){if(n&&("object"===nf(n)||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");return nv(e)}(this,e)});function o(){var e;!function(e,n){if(!(e instanceof n))throw TypeError("Cannot call a class as a function")}(this,o);for(var n=arguments.length,t=Array(n),i=0;i<n;i++)t[i]=arguments[i];return nb(nv(e=r.call.apply(r,[this].concat(t))),"state",{dupeWarningDismissed:!1,pinDescription:(e.props.pin.description||"").trim(),saved:!1,suggestedBoardName:void 0,trackingParams:(e.props.location.state||{}).trackingParams||"",warningAnchor:void 0,windowInnerHeight:"undefined"!=typeof window?window.innerHeight:0}),nb(nv(e),"saved",function(){return e.setState({saved:!0})}),nb(nv(e),"onResize",function(){e.setState({windowInnerHeight:window.innerHeight})}),nb(nv(e),"handleBackButtonTouch",function(){var n=e.props;(0,n.logContextEvent)({view_type:21,view_parameter:87,component:7,element:n.match.params.boardId?34:75,event_type:102})}),nb(nv(e),"handleDismissWarningFlyout",function(){return e.setState({dupeWarningDismissed:!0})}),nb(nv(e),"handleFirstBoardCreateOnSuccess",function(n,t){var i=e.props,r=i.closeupExperience,o=i.completeExperience,a=i.history,l=i.i18n,s=i.repinExperience,c=i.showRepinConfirmation,d=n.boardId,u=n.boardUrl,p=(0,em.Io)(u,t,l),f=p.href,h=p.text,m=(0,H.Z)({boardId:d,isFBC:!0,viewType:21}),g=m.duration,y=m.text,v=m.thumbnail;a.goBack(),c(function(e){var n=e.hideToast;return(0,F.jsx)(N.Z,{duration:g,href:f,onHide:n,text:y||h,thumbnail:v})}),r&&r.placement_id&&503459===r.experience_id&&o(r.placement_id,r.experience_id),s&&E(s,501032)&&o(s.placement_id,s.experience_id)}),nb(nv(e),"handleSetSelectedBoard",function(n){var t=e.props,i=t.history,r=t.pin,o=e.state.trackingParams;e.isFirstBoardCreateActive()||i.push("/board/create/".concat(r.id,"/").concat(n,"/"),{trackingParams:o}),e.setState({suggestedBoardName:n})}),nb(nv(e),"handleFirstBoardCreate",function(n){var t=e.props,i=t.createBoard,r=t.history,o=t.location,a=t.logContextEvent,l=t.match,s=t.pin,c=t.showToast,d=e.state.trackingParams,u=l.params.id;return i({boardCreateOptions:{initial_pins:u?[u]:[],name:n,initial_pin_client_tracking_params:[(0,B.Z)((o.state||{}).trackingParams)],privacy:"public"},deprecatedSchemaForNormalization:ey.IY}).then(function(e){var n,t,i,r=e.id;a({event_type:5,view_type:3,component:7,view_parameter:(0,e2.A)({hasRichMetadata:!!s.rich_metadata,hasRichMetadataProducts:!!(null!==(n=s.rich_metadata)&&void 0!==n&&n.products),hasRichMetadataArticle:!!(null!==(t=s.rich_metadata)&&void 0!==t&&t.article),hasRichMetadataRecipe:!!(null!==(i=s.rich_metadata)&&void 0!==i&&i.recipe)}),object_id_str:s.id,clientTrackingParams:(0,B.Z)(d,s.tracking_params),aux_data:{board_id:r,destination_board_id:r}});var o=e.url;return{boardId:r,boardUrl:void 0===o?"":o}},function(n){throw{onError:function(){r.goBack(),c(function(t){var i=t.hideToast;return(0,F.jsx)(y.ZP,{onHide:i,type:"error",text:n.message||e.props.i18n._('Sorry! Something went wrong on our end.', 'error creating board', 'error creating board')})})}}})}),nb(nv(e),"handleSelectBoard",function(n){var t,i,r=e.props,o=r.history,a=r.pin,l=r.location.search,s=e.state.trackingParams,c=new URLSearchParams(l),d=!!c.get("isEditingPin"),u=null!==(t=c.get("pinBoardId"))&&void 0!==t?t:"",p=null!==(i=c.get("pinSectionId"))&&void 0!==i?i:"";d?o.push("/pin/".concat(a.id,"/repin/").concat(n.id,"/?isEditingPin=true&pinBoardId=").concat(u,"&pinSectionId=").concat(p),{trackingParams:s}):o.push({pathname:"/pin/".concat(a.id,"/repin/").concat(n.id,"/")},{trackingParams:s})}),nb(nv(e),"handleClickAddSectionButton",function(){var n,t,i=e.props,r=i.pin,o=i.history,a=i.match.params.boardId,l=i.location.search;if(a){var s=new URLSearchParams(l),c=!!s.get("isEditingPin"),d=null!==(n=s.get("pinBoardId"))&&void 0!==n?n:"",u=null!==(t=s.get("pinSectionId"))&&void 0!==t?t:"";c?o.push("/pin/".concat(r.id,"/repin/").concat(a,"/add/?isEditingPin=true&pinBoardId=").concat(d,"&pinSectionId=").concat(u)):o.push({pathname:"/pin/".concat(r.id,"/repin/").concat(a,"/add/")})}}),nb(nv(e),"handleRepinToExistingSectionSuccess",function(){return e.props.history.go(-2)}),nb(nv(e),"handleRepinToNewSectionSuccess",function(){return e.props.history.go(-3)}),nb(nv(e),"handleRepinCreateBoardButtonTouch",function(){e.props.logContextEvent({view_type:21,view_parameter:87,component:7,element:249,event_type:102})}),nb(nv(e),"renderCreateScreen",function(){var n,t,i=e.props,r=i.pin,o=i.location.search,a=i.match.params.boardId,l=e.state.trackingParams,s=new URLSearchParams(o),c=!!s.get("isEditingPin"),d=null!==(n=s.get("pinBoardId"))&&void 0!==n?n:"",u=null!==(t=s.get("pinSectionId"))&&void 0!==t?t:"";return!!a&&(0,F.jsx)(eM,{boardId:a,isEditingPin:c,pinBoardId:d,pinSectionId:u,onSuccess:e.handleRepinToNewSectionSuccess,pinKey:{type:"deprecated",data:r},trackingParams:l,useRoundedCorners:!0})}),nb(nv(e),"isFirstBoardCreateActive",function(){var n=e.props,t=n.allBoards,i=n.isFetchingBoards,r=n.saveToProfileEnabled;return!!E(n.repinExperience,501032)||!i&&0===t.length&&!r}),nb(nv(e),"isBoardCreateEduActive",function(){return E(e.props.repinExperience,501021)}),nb(nv(e),"completeBoardCreateEduExperience",function(){var n=e.props,t=n.completeExperience,i=n.repinExperience;i&&e.isBoardCreateEduActive()&&t(i.placement_id,i.experience_id)}),nb(nv(e),"renderPicker",function(){var n,t,i,r,o,a=e.props,l=a.allBoards,s=a.saveToProfileEnabled,c=a.boardsShortlist,d=a.history,u=a.isFetchingBoards,f=a.location,h=a.pin,m=a.match.params.boardId,g=a.location.search,y=e.state,v=y.pinDescription,b=y.dupeWarningDismissed,S=y.saved,j=y.suggestedBoardName,w=y.trackingParams,k=y.warningAnchor,B=v.trim(),E=h.pinned_to_board,R=E?(0,_.nk)(e.props.i18n._('Psst! You already saved this Pin to {{ board_name }}', 'Toast for already having repinned pin', 'Toast for already having repinned pin'),{board_name:E.name}).join(" "):null,C=h.dominant_color,z=h.images?h.images["236x"]:null,L=z?z.url:"",D=new URLSearchParams(g),Z=!!D.get("isEditingPin"),M=null!==(n=D.get("pinBoardId"))&&void 0!==n?n:"",H=null!==(t=D.get("pinSectionId"))&&void 0!==t?t:"",N=!!D.get("isFromToast"),W=null!==(i=D.get("originalPinId"))&&void 0!==i?i:"",U=e.props.i18n._('Save Pin to', 'RepinPage.Section.Header.Title', 'title for section selection in repin flow'),q=new p.Ry(2),Y=e.props.i18n._('Create board', 'Title for first board create', 'Title for first board create. NOTE: we are testing using "collections" in place of "boards" for new users'),V=e.props.i18n._('Save to board', 'boardPicker.header', 'Title for repin page'),Q=m?U:0!==l.length||u||s?V:Y;return(0,F.jsxs)(x.default,{hasFixedHeader:!0,children:[(0,F.jsx)(I.Z,{text:Q}),(0,F.jsx)(P.FixedHeader,{useRoundedCorners:!0,zIndex:q,children:(0,F.jsxs)(p.kC,{alignItems:"center",height:40,justifyContent:"start",children:[(0,F.jsx)(p.xu,{column:2,children:(0,F.jsx)(eb.Z,{color:"darkGray",icon:m?"arrow-back":"cancel",onTouch:e.handleBackButtonTouch,alignIconLeft:!0,size:"sm"})}),(0,F.jsx)(p.xu,{column:8,children:(0,F.jsx)(p.xu,{"data-test-id":"repin-page-title",children:(0,F.jsx)(p.xv,{align:"center",weight:"bold",children:Q})})}),(0,F.jsx)(p.xu,{column:2})]})}),h.images&&(e.isFirstBoardCreateActive()?(0,F.jsx)(ef,{onComplete:e.handleFirstBoardCreateOnSuccess,pinDominantColor:null!=C?C:"",pinImageUrl:null!=L?L:"",savePin:e.handleFirstBoardCreate,selectedBoardName:j}):null),(0,F.jsx)(nx,{children:m?(0,F.jsx)(np,{boardId:m,onSuccess:e.handleRepinToExistingSectionSuccess,pinKey:{type:"deprecated",data:h},trackingParams:w,dismissFlyout:e.saved,showSectionRep:!0,history:d,location:f}):(0,F.jsx)(ni,{allBoards:l,boardsShortlist:c,saveToProfileEnabled:s,history:d,isFetchingBoards:u,isFirstRepinExperience:e.isFirstBoardCreateActive(),isFromToast:N,location:f,onFirstBoardCreate:e.handleSetSelectedBoard,onSelect:e.handleSelectBoard,originalPinId:W,closeModal:e.handleBackButtonTouch,pin:h,pinDescription:B,dismissFlyout:e.saved,isEditingPin:Z,pinBoardId:M,pinSectionId:H})}),m?(0,F.jsx)(T.Wx,{onAddNewSection:e.handleClickAddSectionButton,useIconWithBackground:!0}):(0,F.jsx)(A.Z,{modalHeader:(0,O.Bb)(e.props.i18n),nextLocation:"/board/create/".concat(h.id,"/"),children:(0,F.jsx)(ns,{isFirstBoardCreateActive:e.isFirstBoardCreateActive(),pinKey:{type:"deprecated",data:h},pinDescription:B,trackingParams:w,onTouch:e.handleRepinCreateBoardButtonTouch,useIconWithBackground:!0,isEditingPin:Z,pinBoardId:M,pinSectionId:H})}),z&&e.isBoardCreateEduActive()&&(0,F.jsx)(K,{completeExperience:e.completeBoardCreateEduExperience,pinDominantColor:null!=C?C:"",pinImageHeight:null!==(r=z.height)&&void 0!==r?r:1,pinImageWidth:null!==(o=z.width)&&void 0!==o?o:1,pinImageUrl:null!=L?L:""}),k&&!S&&h.pinned_to_board&&!b&&R&&(0,F.jsx)(p.J2,{anchor:k,idealDirection:"down",onDismiss:e.handleDismissWarningFlyout,shouldFocus:!1,children:(0,F.jsx)(p.xu,{padding:3,children:(0,F.jsx)(p.xv,{weight:"bold",children:(0,F.jsx)("span",{children:R})})})})]})}),e}return t=[{key:"componentDidMount",value:function(){var e=this.props,n=e.repinExperience,t=e.triggerExperimentsForPlacement,i=e.viewExperience;t(1000153),n&&i(1000153,n.experience_id),window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"render",value:function(){return(0,F.jsx)(m.ZP,{accessibilityModalLabel:this.props.i18n._('Repin page', 'RepinPage.MobileModal.AccessibilityLabel', 'Accessibility label on repin page'),isOpen:!0,type:"repinPage",closeOnOutsideClick:!1,onDismiss:function(){},children:(0,F.jsx)(p.xu,{paddingX:2,paddingY:0,height:this.state.windowInnerHeight-g.i_,children:(0,F.jsxs)(u.Switch,{children:[(0,F.jsx)(u.Route,{exact:!0,path:"/pin/:id/repin/",render:this.renderPicker}),(0,F.jsx)(u.Route,{exact:!0,path:"/pin/:id/repin/:boardId/",render:this.renderPicker}),(0,F.jsx)(u.Route,{exact:!0,path:"/pin/:id/repin/:boardId/add/",render:this.renderCreateScreen})]})})})}}],ng(o.prototype,t),i&&ng(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(c.PureComponent),nj=function(e){var n=(0,d.useSelector)(function(e){return e.session.userId}),t=(0,j.Z)({name:"BoardPickerBoardsResource",options:{pin_id:e,field_set_key:"profile_grid_item",shortlist_suggestions:3,user_id:n}}),i=t.isFetching,r=t.data,o=(null==r?void 0:r.all_boards)||[];return{isFetching:i,allBoards:(0,d.useSelector)(function(e){return(0,ev.Z)(nm(nm({},e),{},{boards:o}))||[]}),boardsShortlist:(null==r?void 0:r.boards_shortlist)||[]}};function nw(e){var n,t=(0,u.useHistory)(),i=(0,u.useLocation)(),r=(0,u.useRouteMatch)(),o=null!==(n=r.params.id)&&void 0!==n?n:"",a=(0,v.ZP)(),l=(0,f.Z)(),s=(0,h.be)(),c=(0,h.Ig)(),p=(0,e8.Z)(),m=(0,e_.Tt)(),g=(0,k.Z)().isAuth,y=(0,w.HG)(),_=(0,j.Z)({name:"PinResource",options:{id:o,field_set_key:"repin"}}).data,b=nj(o),P=b.isFetching,x=b.allBoards,T=b.boardsShortlist;(0,S.Z)({name:"UserResource",options:{user_id:null==m?void 0:m.id,field_set_key:"quicksave"}});var I=(0,d.useDispatch)(),B=(0,d.useSelector)(function(e){return e.experiences}),E=(0,eh.Z)(),O=E.showToast,A=E.showRepinConfirmation,R=(0,eg.ZP)((null==m?void 0:m.id)||"").showEnabledSaveBehavior;return!g||y?(0,F.jsx)(u.Redirect,{to:"/pin/".concat(o,"/")}):_?(0,F.jsx)(nS,nm(nm({},e),{},{allBoards:x,boardsShortlist:T,closeupExperience:B[1000112],completeExperience:function(e,n){return I(s(e,n))},createBoard:p,history:t,i18n:a,isFetchingBoards:P,location:i,logContextEvent:l,match:r,pin:_,repinExperience:B[1000153],saveToProfileEnabled:R,showRepinConfirmation:A,showToast:O,triggerExperimentsForPlacement:function(e){return I((0,h.kd)(e))},viewExperience:function(e,n){return I(c(e,n))}})):null}},990823:function(e,n,t){t.d(n,{ZP:function(){return s},tY:function(){return u},Xt:function(){return c},Yh:function(){return d}});var i=t(506979),r=t(773285),o=t(784590),a=t(19121),l={SAVE_TO_PROFILE:0,SHOW_BOARD_PICKER:1};function s(e){var n,t,i=(0,a.Z)(),l=i.isAuth&&i.id===e,s=(0,r.F)().checkExperiment,c=(0,o.Z)(!i.isAuth||l?null:{name:"UserResource",options:{field_set_key:"quicksave",user_id:e}});return{showEnabledSaveBehavior:l&&i.has_quicksave_board||!!(i.isAuth&&null!==(n=(null!=c?c:{}).data)&&void 0!==n&&n.has_quicksave_board)||(l||i.isAuth)&&!i.has_quicksave_board&&!(null!==(t=(null!=c?c:{}).data)&&void 0!==t&&t.has_quicksave_board)&&s("profile_saves_for_all").anyEnabled}}function c(e){var n,t=(0,a.Z)(),i=t.isAuth&&t.id===e,r=(0,o.Z)(!t.isAuth||i?null:{name:"UserResource",options:{field_set_key:"quicksave",user_id:e}});return{boardlessPinsEnabled:i&&t.has_quicksave_board||!!(t.isAuth&&null!==(n=(null!=r?r:{}).data)&&void 0!==n&&n.has_quicksave_board)}}function d(e){var n,t=(0,i.useDispatch)(),r=(0,a.Z)(),l=r.isAuth&&!!r.boardCount&&r.boardCount<5&&e,s=(0,o.Z)(l&&e?{name:"UserResource",options:{field_set_key:"save_behavior",user_id:r.isAuth&&r.id}}:null);return r.isAuth&&void 0===r.save_behavior&&s&&null!==(n=s.data)&&void 0!==n&&n.id&&t({type:"UPDATE_USER_SAVE_BEHAVIOR",payload:{saveBehavior:s.data.save_behavior}}),{showEnabledSaveBehavior:l}}function u(e){var n,t=(0,a.Z)();return e&&(t.save_behavior===l.SAVE_TO_PROFILE?n={type:"classic"}:t.save_behavior===l.SHOW_BOARD_PICKER&&(n={type:"inline"})),{saveBehaviorType:n}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/73740-c22e614d914a7953.js.map