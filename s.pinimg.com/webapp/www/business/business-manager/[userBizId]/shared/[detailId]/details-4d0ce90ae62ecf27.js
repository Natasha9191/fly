(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[96912],{870340:function(e,s,t){(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/business/business-manager/[userBizId]/shared/[detailId]/details"]=function(){return t(742886).Z}},742886:function(e,s,t){"use strict";t.d(s,{Z:function(){return J}});var n=t(326884),i=t(223518),r=t(76911),a=t(506979),o=t(599689),l=t(908390),c=t(453933),_=t(668040),d=t(852260),u=t(15099),m=t(407043),b=t(898781),f=t(349700),h=t(773285),p=t(75740),A=t(611711),y=t(976556),P=t(299230),S=t(790039),g=t(392499),x=t(230412),E=t(273453),z=t(515198);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,s,t){var n;return(n=function(e,s){if("object"!==I(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,s||"default");if("object"!==I(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===s?String:Number)(e)}(s,"string"),(s="symbol"===I(n)?n:String(n))in e)?Object.defineProperty(e,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[s]=t,e}var j=function(e){var s=e.businessManagerUiImprovementsView,t=(0,u.ZP)("BUSINESS_ACCESS_PARTNER_DETAIL_PROFILE"),n=(0,E.nU)(!0),i=(0,a.useSelector)((0,g.BK)(n)),r=(0,a.useSelector)((0,x.kg)(n)),o=(0,b.ZP)(),c=(0,E.HL)().setRequestProfileAccessModal,_=(0,z.jsx)(l.hU,{accessibilityLabel:o._('Info icon for disabled request profile access button', '[m10n]bizAccess.info.disabled.requestProfileAccessButton.accessibilityLabel', 'accessibility label for information button next to button'),icon:"info-circle",size:"md",tooltip:{text:(0,d.VW)(o),idealDirection:"down"}});if(void 0!==s&&s){var m=(0,z.jsxs)(l.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",margin:12,minHeight:y.xu,children:[(0,z.jsx)(l.xv,{size:"300",children:o._('No profile access', '[m10n]businessAccess.businessManager.sharedPartnerProfile.noProfileAccess.title', 'Title shown to indicate there is no profile access')}),(0,z.jsx)(l.xu,{marginTop:2,maxWidth:400,children:(0,z.jsx)(l.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:(0,z.jsx)(l.xv,{align:"center",color:"subtle",inline:!0,size:"200",children:(0,f.nk)(o._('Request the publisher permission to work on your partner\u2019s profile, boards and Pins without requiring their login credentials. {{learnMore}}', '[m10n]businessAccess.businessManager.sharedPartnerProfile.noProfileAccess.message', 'Message shown to indicate there is no profile access. learnMore: text with link to profile permissions help page'),{learnMore:(0,z.jsx)(y.mz,{},1)})},0)})}),(0,z.jsx)(l.xu,{marginTop:2,padding:3,children:(0,z.jsxs)(l.kC,{children:[(0,z.jsx)(l.zx,{color:"red",dataTestId:"request-profile-access-button",disabled:!!r,onClick:function(){c({requesteeId:i.id,adAccounts:[v({},i.id,["PROFILE_PUBLISHER"])]}),t({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"partner-details-profile",element:"BUSINESS_ACCESS_BUTTON",elementId:"profile-request-button"})},size:"md",text:o._('Request profile access', '[m10n]bizAccess.profiles.request', 'Button label for action to request access to profile')}),!!r&&_]})})]},"partner-profile-no-access");return(0,z.jsx)(S.Z,{items:[m]})}return(0,z.jsx)(l.xu,{borderStyle:"shadow",padding:3,rounding:2,children:(0,z.jsxs)(l.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",margin:6,children:[(0,z.jsxs)(l.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:[(0,z.jsxs)(l.xu,{direction:"row",display:"flex",marginBottom:1,children:[(0,z.jsx)(l.xv,{weight:"bold",children:o._('Permissions', '[m10n]bizAccess.partners.detail.profiles.permission', '[m10n] label for profiles permissions header')}),(0,z.jsx)(l.u,{inline:!0,text:o._('Request profile permission to create and manage organic assets for your partner.', '[m10n]bizAccess.partner.detail.profile.role.description', 'Tooltip to explain purpose behind sharing profile permissions'),children:(0,z.jsx)(l.xu,{paddingX:1,children:(0,z.jsx)(l.JO,{accessibilityLabel:"Role description",color:"subtle",icon:"info-circle",inline:!0})})})]}),(0,z.jsx)(l.xv,{children:o._('None', '[m10n]bizAccess.partners.detail.profiles.permission', 'Text to describe the user has no permission.')})]}),(0,z.jsx)(l.xu,{"data-test-id":"request-profile-permissions-button",children:(0,z.jsxs)(l.kC,{children:[(0,z.jsx)(l.zx,{disabled:!!r,onClick:function(){c({requesteeId:i.id,adAccounts:[v({},i.id,["PROFILE_PUBLISHER"])]})},text:o._('Request profile permissions', '[m10n]bizAccess.ad.accounts.request', 'Button label for action to request access to more ad accounts')}),!!r&&_]})})]})})},T=t(912997),C=t(631375),w=t(258304),N=t(812965),O=t(155944),R=t(328930),L=t(816889),D=t(391364),B=t(582618),q=t(888224),U=t(912781),k=t(347174),M=t(809173);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,s){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);s&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,n)}return t}function F(e){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{};s%2?H(Object(t),!0).forEach(function(s){V(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):H(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function V(e,s,t){var n;return(n=function(e,s){if("object"!==Z(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,s||"default");if("object"!==Z(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===s?String:Number)(e)}(s,"string"),(s="symbol"===Z(n)?n:String(n))in e)?Object.defineProperty(e,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[s]=t,e}function K(e,s){return function(e){if(Array.isArray(e))return e}(e)||function(e,s){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,r,a,o=[],l=!0,c=!1;try{if(r=(t=t.call(e)).next,0===s){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=r.call(t)).done)&&(o.push(n.value),o.length!==s);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}(e,s)||function(e,s){if(e){if("string"==typeof e)return W(e,s);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return W(e,s)}}(e,s)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,s){(null==s||s>e.length)&&(s=e.length);for(var t=0,n=Array(s);t<s;t++)n[t]=e[t];return n}var Q=function(e){var s=e.tabIndex,t=void 0===s?0:s,n=(0,b.ZP)(),i=(0,E.KJ)(),o=(0,E.nU)(),c=K((0,r.useState)(""),2),_=c[0],d=c[1],u=(0,a.useDispatch)(),m=(0,h.F)(),f=(0,m.checkExperiment)("business_access_assets_and_history_api_v4_migration").anyEnabled,p=/\d{12}/.test(_)?"id":"name",y=/\d{12}/.test(_)?"id":"full_name";return(0,A.Z)(function(){return u(0===t?(0,B.CM)({searchBy:p,searchTerm:_,businessId:i,detailId:o,experimentsClient:m}):(0,q.iS)({searchBy:y,searchTerm:_,sortBy:f?"FULL_NAME":"full_name",businessId:i,detailId:o}))},T.I.debounceTimeOut,[_]),(0,z.jsx)(l.Um,{accessibilityLabel:t&&0!==t?n._('Search', '[m10n]bizAccess.partners.shared.search', 'Search'):n._('Search ad accounts', '[m10n]bizAccess.ad.account.search', 'Search ad account table by name, id or business name'),id:"bizMemberSearch",onChange:function(e){d(e.value)},placeholder:0===t?n._('Search ad accounts', '[m10n]bizAccess.ad.account.search', 'Search ad account table by name, id or business name'):n._('Search', '[m10n]bizAccess.partners.shared.search', 'Search'),value:_})},Y=function(){var e,s,t,i=(0,h.F)(),A=i.checkExperiment,S=A("web_m10n_business_access_orbac_www").anyEnabled,I=A("web_business_access_quick_edit").anyEnabled,v=A("web_m10n_business_access_orbac_ga").anyEnabled,Z=A("web_m10n_business_hierarchy_beta").anyEnabled,H=A("business_access_employees_api_v4_migration").anyEnabled,W=A("web_m10n_business_manager_ui_improvements").anyEnabled,Y=A("business_access_assets_and_history_api_v4_migration").anyEnabled,J=(0,m.v)().logContextEvent,X=(0,u.ZP)("BUSINESS_ACCESS_PARTNER_DETAIL_AD_ACCOUNTS"),$=(0,E.KJ)(),G=(0,E.nU)(),ee=(0,a.useSelector)((0,g.BK)(G)),es=(0,a.useSelector)(x.Xj),et=(0,a.useSelector)(x.Aj),en=(0,(0,c.C)().getParentHierarchyForIdIfExists)($),ei=null==en?void 0:en.id,er=es.reduce(function(e,s){return F(F({},e),V({},s.asset_id,Y?s.permissions:s.roles))},{}),ea=(0,a.useSelector)(k.wk),eo=(0,a.useSelector)(M.gB),el=(0,a.useSelector)((0,x.kg)(G)),ec=(0,o.useHistory)(),e_=K((0,r.useState)(0),2),ed=e_[0],eu=e_[1],em=K((0,r.useState)({permissionsUpdateToast:!1}),2),eb=em[0],ef=em[1],eh=K((0,r.useState)(!0),2),ep=eh[0],eA=eh[1],ey=(H?null==ee?void 0:null===(e=ee.created_by_business)||void 0===e?void 0:e.id:null==ee?void 0:null===(s=ee.created_by_biz)||void 0===s?void 0:s.id)===$,eP=(0,b.ZP)(),eS=(0,a.useDispatch)(),eg=0===ed?es:et,ex=0===ed?ea&&ep:eo,eE=(0,E.HL)(),ez=eE.setAssignAdAccountsModal,eI=eE.setRequestAdAccountsModal,ev=eE.setAssignProfilesModal,ej=!!((null===(t=ee.assets_summary)||void 0===t?void 0:t.profiles)||[]).length,eT=v&&1===ed&&!ej;(0,r.useEffect)(function(){$&&G&&(eS((0,B.$A)({businessId:$,detailId:G,inEmployeeApiMigration:H,experimentsClient:i})),eS((0,D.Mm)(["PENDING"],$,!0)))},[$,G]),(0,r.useEffect)(function(){0===ed&&eS((0,B.CM)({sortBy:"name",searchBy:"name",businessId:$,detailId:G,experimentsClient:i})),1===ed&&ej&&eS((0,q.iS)({sortBy:Y?"FULL_NAME":"full_name",searchBy:Y?"FULL_NAME":"full_name",businessId:$,detailId:G}))},[ed]);var eC=null!=el&&el.invite_data.sent_at?new Date(el.invite_data.sent_at).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):"",ew=(0,f.nk)(eP._('{{name}}\u2019s', '[m10n]bizAccess.sharedPartnerDetailPage.callout.partnerName', 'partner name with apostrophe name: partner name'),{name:null==el?void 0:el.extended_user_info.full_name}),eN=(0,f.nk)(eP._('You\u2019ve requested access to {{name}} assets on {{date}}', '[m10n]bizAccess.sharedPartnerDetailPage.callout.message', 'message informing an asset request was sent on a date name: bolded text partner name, date: date request was sent'),{name:(0,z.jsx)(l.xv,{inline:!0,weight:"bold",children:ew},"1"),date:eC}),eO=el?(0,z.jsx)(l.ci,{iconAccessibilityLabel:eP._('Info icon', 'Partner.detail.callout', 'icon for information callowut'),message:(0,z.jsx)(l.xv,{children:(0,z.jsx)(l.xu,{maxWidth:412,children:(0,z.jsx)(l.xv,{children:eN})})},"2"),primaryAction:{href:(0,_.Z)("PARTNERS_PENDING_TAB",$),label:eP._('View request', '[m10n]bizAccess.callout.request.a11y', 'view request action'),accessibilityLabel:eP._('View request for access to ad accounts', '[m10n]bizAccess.callout.request.a11y', 'Accessibility label for view request action'),role:"link"},title:eP._('You\u2019ve sent an access request', '[m10n]Partner.detail.pendingRequest.callout.title', 'Title informing user of a sent request'),type:"info"}):null,eR=function(e){var s=e.activeTabIndex;ed!==s&&(J({event_type:101,component:13628,element:0===s?12677:12678,aux_data:{business_id:$}}),eu(s))},eL=(0,z.jsx)(l.mQ,{activeTabIndex:ed,onChange:function(e){var s=e.activeTabIndex,t=e.event,n=e.dangerouslyDisableOnNavigation;t.preventDefault(),n(),eR({activeTabIndex:s})},tabs:[{id:"shared_accounts_tab",text:eP._('Shared ad accounts', '[m10n]bizAccess.sharedPartner.detail.adAccountsTab', 'Name to be shown in Ad accounts tab title'),href:"#"},{id:"profile_permissions_tab",text:eP._('Profile permissions', '[m10n]bizAccess.sharedPartner.detail.profileTab', 'Name to be shown in Profile tab title'),href:"#"}]}),eD=null,eB=W?"red":"gray";eD=0===ed?ey?(0,z.jsx)(l.zx,{color:eB,onClick:function(){ez({selectedIds:[G],selectionType:n.c7.AD_ACCOUNT,dataToRefresh:"PARTNER",assignmentType:"PARTNER"})},text:eP._('Add account', '[m10n]bizAccess.ad.accounts.add', 'Button label for action to add more ad accounts')}):(0,z.jsx)(l.xu,{"data-test-id":"request-ad-account-shared-partner-button",children:(0,z.jsx)(l.zx,{color:eB,disabled:!!el,onClick:function(){eI({requestId:null,partnerId:ee.id}),X({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"partner-details-ad-account",element:"BUSINESS_ACCESS_BUTTON",elementId:"ad-accounts-request-button"})},text:eP._('Request Ad Account', '[m10n]bizAccess.ad.accounts.request', 'Button label for action to request access to more ad accounts')})}):S&&(0,z.jsx)(l.zx,{color:eB,dataTestId:"assign-employees-shared-partner-button",onClick:function(){ev({selectedIds:[G],selectionType:n.Hl.PERSON,dataToRefresh:"PROFILE_PEOPLE",assignmentType:"PEOPLE"})},text:eP._('Assign employees', '[m10n]bizAccess.ad.profiles.assignEmployees', 'Button label for action to assign more ad employees to profile')});var eq=I?[(0,N.Z)(eP),(0,R.Z)(eP,function(e,s){eS((0,U.C5)({userId:G,roles:s,permissions:s,adAccountId:e,businessId:$,assignmentType:"PARTNER",clientBusinessId:G,businessHierarchyNodeId:ei}))},er,"PARTNERS_DETAIL",void 0,void 0,void 0,eb,ef,eA),(0,L.Z)("PARTNER","SHARED_PARTNERS_DETAIL")]:[(0,N.Z)(eP),(0,C.Z)(eP,{field:"roles"}),(0,w.Z)(eP,"AD_ACCOUNT")],eU=0===ed?(0,z.jsx)(y.$2,{}):(0,z.jsx)(y.uX,{});return(0,z.jsx)(P.Z,{assetFlowBannerText:W?0===ed?eP._('This partner can share ad account access with you or you may request ad account access from them', '[m10n]bizAccess.shared.partners.detail.asset.flow.visualization.ad.account', 'Information on how ad account permissions are shared'):1!==ed||eT?null:eP._('You may assign employees access to this partner\u2019s profile', '[m10n]bizAccess.shared.partners.detail.asset.flow.visualization.profile', 'Information on assigning profile permissions'):null,backButtonText:eP._('Back to partners', '[m10n]bizAccess.partners.detail.back', '[m10n] button label for action to navigate back to partners page'),callout:eO,cta:eT?null:eD,infoIconButtonText:el&&0===ed?(0,d.VW)(eP):"",onBackButtonClick:function(){ec.push((0,_.Z)("PARTNERS",$))},pageContent:eT?(0,z.jsx)(j,{businessManagerUiImprovementsView:W}):(0,z.jsx)(T.Z,{columnDefs:0===ed?eq:[(0,O.Z)(eP,{headerName:eP._('Employee name', '[m10].bizAccess.sharedPartnersDetailPage.employee, header for employee column', 'Header of employee name column in table'),type:"PEOPLE",hidesAvatar:!0}),(0,C.Z)(eP,{field:"roles"}),(0,w.Z)(eP,"PEOPLE","REMOVE_EMPLOYEE_PROFILE_PERMISSIONS")],customEmptyState:Z?eU:null,id:n.Q6.PARTNERS_DETAIL,isLoading:ex,onPageChange:function(e){return 0===ed?eS((0,B.CM)({page:e,businessId:$,detailId:G,experimentsClient:i})):eS((0,q.iS)({page:e,businessId:$,detailId:G}))},onRowCountChange:function(e){return 0===ed?eS((0,B.CM)({limit:e,businessId:$,detailId:G,experimentsClient:i})):eS((0,q.iS)({limit:e,businessId:$,detailId:G}))},onSortChange:function(e,s){return 0===ed?eS((0,B.CM)({sortBy:e,sortDirection:s,businessId:$,detailId:G,experimentsClient:i})):eS((0,q.iS)({sortBy:e,sortDirection:s,businessId:$,detailId:G}))},pageType:n.Q6.PARTNERS_DETAIL,rowData:eg}),pageType:n.Q6.PARTNERS_DETAIL,search:eT?null:(0,z.jsx)(Q,{tabIndex:ed}),sidebar:(0,z.jsx)(p.Z,{}),tabs:S&&eL,title:eP._('Partner details', '[m10n]bizAccess.partners.detail.shared.title', 'Heading containing the number of shared accounts')})},J=function(){return(0,z.jsx)(i.Z,{pageType:n.Q6.PARTNERS_DETAIL,children:(0,z.jsx)(Y,{})})}}},function(e){e.O(0,[97270,8390,1861,99689,26067,17492,48327,66312,99246,70987,68445,80538,92914,11582,88435,19798,6863,73453,35477,38628,85690,16134,5268],function(){return e(e.s=870340)}),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/business/business-manager/[userBizId]/shared/[detailId]/details-4d0ce90ae62ecf27.js.map