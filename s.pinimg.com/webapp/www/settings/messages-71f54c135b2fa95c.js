(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3961],{881730:function(e,s,i){(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/settings/messages"]=function(){return i(568010).Z}},974836:function(e,s,i){"use strict";var t=i(76911),n=i(908390),o=i(515198),r=(0,t.forwardRef)(function(e,s){var i=e.heading,t=e.iconAccessibilityLabel,r=e.headingAccessibilityLevel,l=e.description,a=e.onTap,c=e.primarySettingsMenu;return(0,o.jsx)(n.iP,{onTap:void 0===a?function(){}:a,tapStyle:"none",children:(0,o.jsx)(n.xu,{padding:c?2:0,children:(0,o.jsxs)(n.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,o.jsxs)(n.xu,{ref:s,children:[(0,o.jsx)(n.X6,{accessibilityLevel:void 0===r?3:r,size:"400",children:i}),l&&(0,o.jsx)(n.xu,{marginTop:2,children:(0,o.jsx)(n.xv,{color:"subtle",children:l})})]}),(0,o.jsx)(n.xu,{paddingY:1,children:(0,o.jsx)(n.JO,{accessibilityLabel:t,color:c?"subtle":"default",icon:"arrow-forward"})})]})})})});s.Z=r},776084:function(e,s,i){"use strict";var t=i(908390),n=i(515198);s.Z=function(e){var s=e.heading,i=e.description,o=e.switchId,r=e.onChange,l=e.switched,a=e.headingAccessibilityLevel;return(0,n.jsxs)(t.kC,{alignItems:"center",justifyContent:"between",children:[(0,n.jsx)(t.xu,{flex:"grow",marginEnd:4,children:(0,n.jsxs)(t.__,{htmlFor:o,children:[(0,n.jsx)(t.X6,{size:"400",accessibilityLevel:a||3,children:s}),i?(0,n.jsx)(t.xu,{flex:"grow",marginTop:2,children:(0,n.jsx)(t.xv,{color:"subtle",children:i})}):null]})}),(0,n.jsx)(t.rs,{id:o,onChange:r,switched:l})]})}},568010:function(e,s,i){"use strict";i.d(s,{Z:function(){return S}});var t=i(76911),n=i(506979),o=i(599689),r=i(908390),l=i(499128),a=i(898781),c=i(313047),d=i(542554),u=i(773285),g=i(784590),_=i(80816),h=i(974836),m=i(343341),f=i(50286),p=i(19121),b=i(660119),x=i(205992),v=i(456840),A=i(776084),P=i(515198);function j(e,s){return function(e){if(Array.isArray(e))return e}(e)||function(e,s){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var t,n,o,r,l=[],a=!0,c=!1;try{if(o=(i=i.call(e)).next,0===s){if(Object(i)!==i)return;a=!1}else for(;!(a=(t=o.call(i)).done)&&(l.push(t.value),l.length!==s);a=!0);}catch(e){c=!0,n=e}finally{try{if(!a&&null!=i.return&&(r=i.return(),Object(r)!==r))return}finally{if(c)throw n}}return l}}(e,s)||function(e,s){if(e){if("string"==typeof e)return y(e,s);var i=Object.prototype.toString.call(e).slice(8,-1);if("Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return y(e,s)}}(e,s)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,s){(null==s||s>e.length)&&(s=e.length);for(var i=0,t=Array(s);i<s;i++)t[i]=e[i];return t}var S=function(){var e,s,i,y=(0,n.useDispatch)(),S=(0,o.useHistory)(),w=(0,a.ZP)(),z=(0,f.HG)(),L=(0,p.Z)(),I=(0,m.F9)().showToast,E=(0,u.F)().checkExperiment,C=(0,g.Z)({name:"UserSettingsResource",noCache:!0}),D=C.data,T=C.isLoaded,M=j((0,t.useState)(null===(s=L.partner)||void 0===s?void 0:s.enable_profile_message),2),O=M[0],k=M[1],H=j((0,t.useState)([]),2),B=H[0],N=H[1],Z=j((0,t.useState)([]),2),F=Z[0],R=Z[1],U=E("messaging_permissions_update").anyEnabled;(0,t.useEffect)(function(){var e,s=(null==D?void 0:D.messaging_permissions)||[];if(T&&s.length>0){var i=[],t=[];s.forEach(function(e){return e.eligible_levels.length>1?i.push(e):t.push(e)}),N(i),R(t)}k(null==D?void 0:null===(e=D.partner)||void 0===e?void 0:e.enable_profile_message)},[null==D?void 0:D.messaging_permissions,null==D?void 0:null===(i=D.partner)||void 0===i?void 0:i.enable_profile_message,T]);var X=function(e){var s=e.groupId,i=e.selectedLevelId,t=U?(0,v.Pp)({groupId:s,i18n:w}):(0,v.CE)({groupId:s,i18n:w}),n=(0,v.m8)({levelId:i,i18n:w});return t&&n&&(0,P.jsx)(r.xu,{marginBottom:6,"data-test-id":"".concat(t.route,"-message-setting"),children:(0,P.jsx)(h.Z,{heading:t.title,headingAccessibilityLevel:2,description:n.label,iconAccessibilityLabel:w._('Go to Edit title', 'profile.SocialPermissions.Messages.Icon', 'Edit Messages Icon on Social Permissions Page'),onTap:function(){t.route&&S.push("/settings/messages/".concat(t.route))}})},s)},G=function(e){var s=e.groupId,i=U?(0,v.Pp)({groupId:s,i18n:w}):(0,v.CE)({groupId:s,i18n:w});return i&&(0,P.jsxs)(r.xu,{marginBottom:6,"data-test-id":"".concat(i.route,"-message-setting"),children:[(0,P.jsx)(r.X6,{size:"400",accessibilityLevel:2,children:i.title}),(0,P.jsx)(r.xu,{marginTop:2,children:(0,P.jsx)(r.xv,{color:"subtle",children:i.nonEditableSubtitle||""})})]},s)},K=B.length>0||F.length>0,W=L.partner?!!O&&K:K;if(!L.isAuth)return(0,P.jsx)(o.Redirect,{to:v.NN});if(z)return(0,P.jsx)(o.Redirect,{to:v.ic});if(!T)return(0,P.jsx)(r.kC,{alignContent:"center",alignItems:"stretch",direction:"column",height:"100vh",justifyContent:"center",width:"100vw",children:(0,P.jsx)(r.$j,{accessibilityLabel:w._('Loading messaging permissions edit page', 'userSettingsPage.socialPermissions.MessagingPermissions.loading', 'Loading state for the edit messaging permissions page'),show:!0})});var Y=U?w._('You decide whether messages go to your inbox, requests, or if you don\u2019t receive them at all', 'userSettingsPage.SocialPermissions.MessagingPermissions.description', 'Description for the edit messaging permissions page'):w._('Choose who can send you messages', 'userSettingsPage.SocialPermissions.MessagingPermissions.description.deprecated', 'Deprecated description for the edit messaging permissions page');return(0,P.jsxs)(d.default,{hasFixedHeader:!0,children:[(0,P.jsx)(c.FixedHeader,{zIndexForGestaltBug:2,children:(0,P.jsx)(b.default,{heading:w._('Messages', 'userSettingsPage.socialPermissions.MessagingPermissions.title', 'Page for the edit messaging permissions settings'),previousUrl:"/settings/permissions",legoSettingsEnabled:!0})}),(0,P.jsxs)(r.xu,{paddingX:2,marginBottom:2,"data-test-id":"settings-messages",children:[(0,P.jsx)(r.xu,{marginTop:1,marginBottom:6,children:(0,P.jsx)(r.xv,{align:"start",size:"300",children:Y})}),L.partner&&(0,P.jsx)(r.xu,{marginBottom:6,children:(0,P.jsx)(A.Z,{heading:w._('Allow others to message my business', 'profile.Messages.title', 'Settings toggle for enabling messages receival on bussines profile'),headingAccessibilityLevel:2,description:(e=w._('A message button will appear on your profile so others can message you.', 'profile.Messages.description', 'Settings toggle for enabling messages receival on bussines profile'),O&&(e+=" "+(w._('Change how you receive messages below.', 'settings.messagingPermissions.businessSetting.description.enabled', 'Additional line for business message setting when setting is enabled'))),e),switchId:"partner-messages-switch",onChange:function(){var e,s=!O;k(s),y((0,x._L)({field:"enable_profile_message",value:s,onSettingSavedHn:function(){I(function(e){var s=e.hideToast;return(0,P.jsx)(l.ZP,{duration:v.hN,text:w._('Message settings saved', 'profile.SocialPermissions.Messages.ToastMessage', 'Name of setting being saved for confirmation toast'),onHide:s})})},showErrorHn:function(){},surfaceTag:_.i.SETTINGS,userId:null!==(e=L.id)&&void 0!==e?e:""}))},switched:!!O})}),W&&(0,P.jsxs)(t.Fragment,{children:[B.map(function(e){return X({groupId:e.group_id,selectedLevelId:e.selected_level})}),F.map(function(e){return G({groupId:e.group_id})}),(0,P.jsxs)(r.xu,{marginBottom:6,"data-test-id":"blocked-accounts-message-setting",children:[(0,P.jsx)(r.X6,{size:"400",accessibilityLevel:2,children:w._('Blocked accounts', 'settings.messagingPermissions.blockedAccounts.subHeader', 'Subheader for note on blocked accounts behavior for messaging permissions')}),(0,P.jsx)(r.xu,{marginTop:2,children:(0,P.jsx)(r.xv,{color:"subtle",children:w._('Note: Accounts you\'ve blocked on Pinterest can\'t message you. To unblock an account, go to their profile.', 'settings.messagingPermissions.blockedAccounts.description', 'Description for blocked accounts behavior for messaging permissions')})})]})]})]})]})}}},function(e){e.O(0,[97270,8390,99689,26067,17492,48327,36669],function(){return e(e.s=881730)}),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/settings/messages-71f54c135b2fa95c.js.map